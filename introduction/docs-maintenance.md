# 文档维护规范（新增功能必更新）

本项目的原则是：**代码与文档同仓库演进**。

当你新增/修改功能时，请至少完成以下更新，以保持架构说明、运行方式、以及“为什么这么做”的脉络清晰。

## 1. 必更新清单（每次迭代）

### 1.1 路由与页面变化

如果新增/调整了页面或 route handler：

- 更新 [blog-system.md](./blog-system.md) 的“页面结构（路由地图）”
- 若涉及 App Router 特性（`generateStaticParams`、`dynamic`、`revalidate` 等），补充到 [nextjs-app-router-pages.md](./nextjs-app-router-pages.md)

### 1.2 数据流与模块边界变化

如果新增了 `src/lib/*`、新数据层、或改变了内容渲染方式：

- 更新 [blog-system.md](./blog-system.md) 的“目录结构与模块分层”与“核心功能原理”
- 写清楚：输入是什么、输出是什么、在哪个阶段运行（构建期/请求期/客户端）

### 1.3 配置与环境变量

如果新增 `.env` 变量（例如评论、站点 URL、分析脚本等）：

- 在 [blog-system.md](./blog-system.md) 的对应功能章节写清楚变量名、用途、缺失时的行为
- 在 README（仓库根目录）也补充一段“环境变量示例”（若你在仓库层也维护 README）

### 1.4 依赖变化

如果新增 npm 包：

- 在 [blog-system.md](./blog-system.md) 的“技术栈与选型理由”或相应章节补充它的角色
- 如果它替代了旧方案，说明“替代原因/收益/风险”

### 1.5 迁移/破坏性变更

若改动会影响已有文章或 URL：

- 在 [blog-system.md](./blog-system.md) 的“发展脉络”追加一条记录
- 写清楚迁移策略（例如 slug 规则变化、重定向策略）

## 2. 推荐写法（模板）

当新增一个功能（例如：sitemap、站内搜索索引构建期生成、图片组件映射）时，建议在文档中补上：

- **动机**：解决什么问题
- **方案**：选了什么库/技术，为什么
- **数据流**：从哪里来 → 经过什么处理 → 输出到哪里
- **边界**：Server/Client、构建期/运行期、性能权衡
- **后续演进**：下一步可怎么升级

## 3. 本目录的职责边界

- `introduction/`：偏“架构/原理/演进”，面向开发者
- 代码注释：偏“局部机制/为什么这样写”，面向维护者
- 根目录 README：偏“如何运行/如何部署”，面向使用者
